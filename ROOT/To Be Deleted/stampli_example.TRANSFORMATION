{"job":{"components":{"117734":{"id":117734,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":-448265581,"x":1056,"y":128,"width":32,"height":32,"inputConnectorIDs":[117744],"outputConnectorIDs":[117747],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Extract Nested Data 0"}}}},"visible":true},"2":{"slot":2,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"3":{"slot":3,"name":"Columns","elements":{"1":{"slot":1,"elements":{"1":{"slot":1,"elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"S"},"2":{"slot":2,"type":"STRING","value":"Text"},"3":{"slot":3,"type":"STRING","value":"100"},"4":{"slot":4,"type":"STRING","value":"0"},"5":{"slot":5,"type":"STRING","value":"get_array_from_keys"},"6":{"slot":6,"type":"STRING","value":"s"},"7":{"slot":7,"type":"STRING","value":"false"},"8":{"slot":8,"type":"STRING","value":"true"}}}},"values":{"1":{"slot":1,"type":"STRING","value":""},"2":{"slot":2,"type":"STRING","value":"Super"},"3":{"slot":3,"type":"STRING","value":"0"},"4":{"slot":4,"type":"STRING","value":"0"},"5":{"slot":5,"type":"STRING","value":"get_array_from_keys"},"6":{"slot":6,"type":"STRING","value":""},"7":{"slot":7,"type":"STRING","value":"false"},"8":{"slot":8,"type":"STRING","value":"true"}}}},"values":{"1":{"slot":1,"type":"STRING","value":"companyIds"},"2":{"slot":2,"type":"STRING","value":"Super"},"3":{"slot":3,"type":"STRING","value":"0"},"4":{"slot":4,"type":"STRING","value":"0"},"5":{"slot":5,"type":"STRING","value":"get_array_from_keys"},"6":{"slot":6,"type":"STRING","value":""},"7":{"slot":7,"type":"STRING","value":"true"},"8":{"slot":8,"type":"STRING","value":"true"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"creationTime"},"2":{"slot":2,"type":"STRING","value":"DateTime"},"3":{"slot":3,"type":"STRING","value":"0"},"4":{"slot":4,"type":"STRING","value":"0"},"5":{"slot":5,"type":"STRING","value":"get_array_from_keys"},"6":{"slot":6,"type":"STRING","value":"creation_time"},"7":{"slot":7,"type":"STRING","value":"false"},"8":{"slot":8,"type":"STRING","value":"true"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"accountName"},"2":{"slot":2,"type":"STRING","value":"Text"},"3":{"slot":3,"type":"STRING","value":"100"},"4":{"slot":4,"type":"STRING","value":"0"},"5":{"slot":5,"type":"STRING","value":"get_array_from_keys"},"6":{"slot":6,"type":"STRING","value":"account_name"},"7":{"slot":7,"type":"STRING","value":"false"},"8":{"slot":8,"type":"STRING","value":"true"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"accountType"},"2":{"slot":2,"type":"STRING","value":"Text"},"3":{"slot":3,"type":"STRING","value":"10"},"4":{"slot":4,"type":"STRING","value":"0"},"5":{"slot":5,"type":"STRING","value":"get_array_from_keys"},"6":{"slot":6,"type":"STRING","value":"account_type"},"7":{"slot":7,"type":"STRING","value":"false"},"8":{"slot":8,"type":"STRING","value":"true"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"updateTime"},"2":{"slot":2,"type":"STRING","value":"DateTime"},"3":{"slot":3,"type":"STRING","value":"0"},"4":{"slot":4,"type":"STRING","value":"0"},"5":{"slot":5,"type":"STRING","value":"get_array_from_keys"},"6":{"slot":6,"type":"STRING","value":"update_time"},"7":{"slot":7,"type":"STRING","value":"false"},"8":{"slot":8,"type":"STRING","value":"true"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"bankName"},"2":{"slot":2,"type":"STRING","value":"Text"},"3":{"slot":3,"type":"STRING","value":"100"},"4":{"slot":4,"type":"STRING","value":"0"},"5":{"slot":5,"type":"STRING","value":"get_array_from_keys"},"6":{"slot":6,"type":"STRING","value":"bank_name"},"7":{"slot":7,"type":"STRING","value":"false"},"8":{"slot":8,"type":"STRING","value":"true"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"versionId"},"2":{"slot":2,"type":"STRING","value":"Text"},"3":{"slot":3,"type":"STRING","value":"100"},"4":{"slot":4,"type":"STRING","value":"0"},"5":{"slot":5,"type":"STRING","value":"get_array_from_keys"},"6":{"slot":6,"type":"STRING","value":"version_id"},"7":{"slot":7,"type":"STRING","value":"false"},"8":{"slot":8,"type":"STRING","value":"true"}}}},"visible":true},"4":{"slot":4,"name":"Array Prefix","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"f"}}}},"visible":true},"5":{"slot":5,"name":"Column Aliases","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"i"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"117735":{"id":117735,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1838652813,"x":880,"y":128,"width":32,"height":32,"inputConnectorIDs":[117745],"outputConnectorIDs":[117744],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Convert back to SUPER from Extract Nested component"}}}},"visible":true},"2":{"slot":2,"name":"Conversions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"get_array_from_keys"},"2":{"slot":2,"type":"STRING","value":"Super"},"3":{"slot":3,"type":"INTEGER","value":""},"4":{"slot":4,"type":"INTEGER","value":""},"5":{"slot":5,"type":"STRING","value":""}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"117736":{"id":117736,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1838652813,"x":336,"y":128,"width":32,"height":32,"inputConnectorIDs":[117740],"outputConnectorIDs":[117743],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Concerting SUPER to Text"}}}},"visible":true},"2":{"slot":2,"name":"Conversions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"col1"},"2":{"slot":2,"type":"STRING","value":"Text"},"3":{"slot":3,"type":"INTEGER","value":"1000"},"4":{"slot":4,"type":"INTEGER","value":""},"5":{"slot":5,"type":"STRING","value":""}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"117737":{"id":117737,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1716658327,"x":704,"y":128,"width":32,"height":32,"inputConnectorIDs":[117742],"outputConnectorIDs":[117745],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Extract Array from Keys"}}}},"visible":true},"2":{"slot":2,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"3":{"slot":3,"name":"Calculations","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"json_extract_path_text(\"col1\", \"uid_keys\")"},"2":{"slot":2,"type":"STRING","value":"get_array_from_keys"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"117738":{"id":117738,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1716658327,"x":528,"y":128,"width":32,"height":32,"inputConnectorIDs":[117743],"outputConnectorIDs":[117742],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Apply UDF to extract keys"}}}},"visible":true},"2":{"slot":2,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"3":{"slot":3,"name":"Calculations","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"f_py_json_keys(\"col1\")"},"2":{"slot":2,"type":"STRING","value":"uid_keys"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"117739":{"id":117739,"inputCardinality":"ZERO","outputCardinality":"MANY","implementationID":1354890871,"x":192,"y":128,"width":32,"height":32,"inputConnectorIDs":[],"outputConnectorIDs":[117740],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"stampli_test1"}}}},"visible":true},"2":{"slot":2,"name":"Table Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"stampli_test1"}}}},"visible":true},"3":{"slot":3,"name":"Column Names","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"col1"}}}},"visible":true},"4":{"slot":4,"name":"Trim Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"5":{"slot":5,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"phil_external"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"117741":{"id":117741,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":128170095,"x":1216,"y":128,"width":32,"height":32,"inputConnectorIDs":[117747],"outputConnectorIDs":[],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Select flattened columns"}}}},"visible":true},"2":{"slot":2,"name":"Column Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"uid_keys"},"2":{"slot":2,"type":"STRING","value":"keys"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"s"},"2":{"slot":2,"type":"STRING","value":"s"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"creation_time"},"2":{"slot":2,"type":"STRING","value":"creation_time"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"account_name"},"2":{"slot":2,"type":"STRING","value":"account_name"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"account_type"},"2":{"slot":2,"type":"STRING","value":"account_type"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"update_time"},"2":{"slot":2,"type":"STRING","value":"update_time"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"bank_name"},"2":{"slot":2,"type":"STRING","value":"bank_name"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"version_id"},"2":{"slot":2,"type":"STRING","value":"version_id"}}}},"visible":true},"3":{"slot":3,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"}},"connectors":{"117740":{"id":117740,"sourceID":117739,"targetID":117736},"117742":{"id":117742,"sourceID":117738,"targetID":117737},"117743":{"id":117743,"sourceID":117736,"targetID":117738},"117744":{"id":117744,"sourceID":117735,"targetID":117734},"117745":{"id":117745,"sourceID":117737,"targetID":117735},"117747":{"id":117747,"sourceID":117734,"targetID":117741}},"notes":{"117728":{"id":117728,"x":809,"y":-98,"width":169,"height":279,"text":"Converted back to SUPER to allow the Extract Nested Data component to flatten the data","colour":"e6e63c"},"117730":{"id":117730,"x":423,"y":-98,"width":176,"height":275,"text":"Created this UDF in Redshift, to allow User defined function to extract the keys in this calc component;\n\ncreate or replace function f_py_json_keys (a varchar(65535))\n    returns varchar(65535)\n    stable\nas $$\n    import json\n    return \",\".join(json.loads(a).keys())\n$$ language plpythonu;","colour":"e6e63c"},"117731":{"id":117731,"x":628,"y":-98,"width":149,"height":278,"text":"Extract the array object based on the keys","colour":"e6e63c"},"117732":{"id":117732,"x":-124,"y":-98,"width":391,"height":279,"text":"**Added two semi-structured objects in to a demo table**\n\n{\"58787676-2sdf6d6-42sdfsa3\":{\"companyIds\":[{\"S\":\"COMPANY_ID_EMPTY\"}],\"creationTime\":\"2006-08-25T20:08:43.460Z\",\"accountName\":\"CC\",\"accountType\":\"B\",\"updateTime\":\"2007-01-30T20:08:43.460Z\",\"bankName\":\"Bank a\",\"versionId\":\"58787676-2sdf6d6-42sdfsa3\"}}\n{\"99999999-2sdf6d6-42sdfsa3\":{\"companyIds\":[{\"S\":\"COMPANY_ID_EMPTY\"}],\"creationTime\":\"2006-08-25T20:08:43.460Z\",\"accountName\":\"CC\",\"accountType\":\"B\",\"updateTime\":\"2007-01-30T20:08:43.460Z\",\"bankName\":\"Bank a\",\"versionId\":\"58787676-2sdf6d6-42sdfsa3\"}}\n","colour":"e6e63c"},"117733":{"id":117733,"x":288,"y":-97,"width":106,"height":276,"text":"Converted the JSON from SUPER to Text to allow some Redshift functions","colour":"e6e63c"}},"noteConnectors":{},"variables":{"var1":{"definition":{"name":"var1","type":"DATA_STRUCTURE","scope":"BRANCH","description":null,"visibility":"PUBLIC"},"value":"{   \"col1\" : {     \"type\" : \"STRUCT\",     \"objectcontents\" : { }   } }"}},"grids":{}},"info":{"name":"stampli_example","description":"","type":"TRANSFORMATION","tag":"4a658cba-3c57-4e56-8992-90d0c5d61a4a"}}